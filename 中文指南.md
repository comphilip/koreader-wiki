# kindlepdfviewer 中文指南
欢迎大家一起编辑，把自己觉得好玩的技巧和修改都加进来。

## 介绍
* [让Kindle支持扫描版PDF重排][kpv_reflow_intro] -- by @chrox(Huangxin)
* [KindlePdfViewer给Kindle阅读扫描版PDF带来最佳体验][kpv_intro2] -- by @ever4kevin

## 安装指南
* [【Kindle Pdf Viewer中文安装教程】支持扫描版PDF重排及其他主流文件格式(以Kindle3为例)][kpv_installtutorial] -- by @zthink

## FAQ
### 快速选择所需的书籍
**Q**: 我的书太多了，找起来很不方便，KPV支持“最近阅读记录”和“按格式过滤文档”的功能吗？

**A**: 两个功能都是支持的。
* 最近阅读记录： 在文件管理器下按“L”即可调出阅读历史
* 按格式过滤：在文件管理器下按“S”调出搜索框，输入文件格式（例如pdf）即可过滤出所指定的格式。

### 中文显示乱码
**Q**: 为了体验原生系统，我将kindle3,越狱后汉化，用字体破解和debug实现，原生系统正常显示中文，但是用kindlepdfviewer打开txt,epub,mobi的文件，中文字体都是???的显示，英文貌似正常……请问这正常吗，还是可能我reset后哪步汉化出错了？看到打开文件有个显示register fonts(大概这个意思，注册字体？)然后打开文件中文一堆乱码……

**A**: 这个是正常的，因为kpv默认使用英文字体，所以中文字体都会显示为???，解决方法是阅读文档时在字体菜单里面选择支持中文的字体，步骤如下：
* 打开电子书
* 按`f`键，调出字体菜单
* 选择任意一个支持中文的字体。kpv自带支持中文的字体有：**Droid Sans Fallback**, **AR PL SungtiL GB**。你也可以把自己喜欢的字体（ttf或cff）放到fonts目录下，kpv在启动时会将其自动载入字体列表中。
* 除了正文字体之外，按menu键能显示当前位置和章节，缺省这里的字体不支持中文也就无法显示中文章节名称，可以到文件浏览器下面按F然后按E选择rifont，选成支持中文的字体，就可以在状态信息里显示中文章节名了。
* 还有就是根据修改字体的方法不同，第一次打开kpv的时候的文件浏览器未必能显示中文文件名，这时同样可以在文件浏览器下按F然后按U来选择文件浏览的字体以便支持中文文件名。

### EPUB分页信息丢失
**Q**: 我在kindle上装了Kindlepdfviewer 和 Coolreader 两个软件，经测试发现现在版本的 Kindlepdfviewer 的 EPUB 解析
比 Coolreader 差一些，原本有分页的内容在 Kindlepdfviewer 上被合并为一页了。有办法实现Coolreader的效果吗？

**A**: Coolreader的引擎Crengine本身是支持两种渲染模式的，一种是卷轴模式（当前KPV采用的模式），另一种是分页模式（Coolreader默认采用的模式）。在卷轴模式下所有的分页会连续显示，所以就不再存在页的概念了。切换显示模式需要修改Crengine的调用代码，所以每次改动后需要重新编译。我们会考虑以后加入选项让用户随时切换显示模式。

### 中文文档排版混乱
**Q**： 中文排版还是有问题，非扫描版的pdf中文排版乱的不行，排版混乱，字距特别大。

**A**： 重排中文文档时需要把词间距（Word Spacing）调到最小。因为软件默认的词间距是对应英文文档的词间距，超过了大部分中文文档字与字之间的空隙，造成重排时无法切分中文字符，只在标点符号等少数位置断行。把词间距设置为最小一般就能解决上述问题。

### 如何设置局部刷新
**Q**：能够设置局部刷新吗？需要修改什么地方？

**A**：
* 如果你只需要对某个文档进行单独设置的话，需要打开文档后按`R`键，这时会调出一个输入框用于控制连续局部刷新的计数器。例如输入2,则每两次局部刷新后才会触发一次全局刷新。
* 如果你需要设置默认（对所有文档有效）局部刷新计数器的话，请修改`default.lua`文件，将`DRCOUNTMAX`改为你需要的值即可，数字不需要加引号。

要注意的是默认设置的优先级低于单个文档的设置。


### 如何设置页面背景颜色
**Q**：阅读PDF时适应页面大小以后，填充空白的背景色是灰色的，如何改为白色？

**A**：修改kindlepdfviewer目录下的defaults.lua文件，把
```
-- background colour: 8 = gray, 0 = white, 15 = black
DBACKGROUND_COLOR = 8
```
修改为：
```
-- background colour: 8 = gray, 0 = white, 15 = black
DBACKGROUND_COLOR = 0
```
可以设置背景色为白色。


### 其他Kindle设备的支持
**Q**： 请问什么时候会加入对KT的支持？

**A**： 目前正在开发支持K4, Kindle Touch, Kindle Paperwhite的版本，新版本的Kindlepdfviewer将会支持所有Kindle阅读设备。目前底层代码已经全部完成了，就是界面部分还有很多功能没从旧版中移植过来，现在奇缺开发者。任何有兴趣参与开发但是不知道如何开始或有开发相关问题的朋友欢迎给我们发邮件（点击[项目开发者][contributors]人名进入个人页面可以找到开发者的邮箱）。中文邮件请发送到@houqp @chrox @kai771， 一般情况下我们都会热心解答。

## Hacks


[kpv_reflow_intro]:http://vislab.bjmu.edu.cn/blog/hwangxin/2012/10/read-scanned-pdfs-with-kindlepdfviewer/
[kpv_intro2]:http://note1day.com/2012/11/kindlepdfviewer
[kpv_installtutorial]:http://zthinking.com/blog/kindle-pdf-viewer-tutorial.html
[contributors]:https://github.com/hwhw/kindlepdfviewer/graphs/contributors